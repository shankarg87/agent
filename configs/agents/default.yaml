# Default Agent Profile Configuration

# Identity
profile_name: "default"
profile_version: "1.0.0"
description: "General-purpose Swiss Army Knife agent with MCP tool support"
labels:
  - "general"
  - "coding"

# Model Configuration
primary_model:
  provider: "anthropic"
  model: "claude-sonnet-4-5-20250929"
  # API key should be set via ANTHROPIC_API_KEY environment variable

routing_strategy: "single"
max_context_tokens: 200000
max_output_tokens: 8192
temperature: 0.7
top_p: 0.9

# System Prompt
system_prompt: |
  You are a helpful AI assistant with access to various tools through the Model Context Protocol (MCP).
  You can execute commands, interact with files, query databases, and perform other operations as needed.

  Always:
  - Think step by step
  - Use tools when appropriate
  - Explain your reasoning
  - Ask for clarification when needed

# Prompt Templates
prompt_templates:
  interactive_preamble: "The user is engaging in an interactive conversation."
  autonomous_preamble: "Complete the following task autonomously with minimal interaction."
  tool_use_preamble: "You have access to the following tools. Use them as needed to complete the task."
  checkpoint_preamble: "Please review and approve the following action before proceeding."

output_style: "concise"

# Tools/MCP - references to servers defined in mcp/servers.yaml
tools:
  - server_name: "echo"
    timeout: 30s
    retries: 3
    concurrency_limit: 5
    # Allow only safe echo/demo tools
    allowlist:
      - "echo"
      - "uppercase"
      - "add_numbers"
    # Deny any potentially dangerous patterns
    denylist:
      - ".*delete.*"
      - ".*remove.*"
      - ".*exec.*"
      - ".*shell.*"
      - ".*sudo.*"
    requires_approval:
      always: false
      # Require approval for any operations that might be risky
      conditional:
        - ".*write.*"
        - ".*create.*"
        - ".*modify.*"
        - ".*command.*"
        - ".*run.*"
    redaction:
      # Redact sensitive argument names
      arguments: ["password", "secret", "key", "token", "auth"]
      outputs: false

# Approval & Checkpoints
approval_mode: "policy"
approval_policies:
  write_ops: false
  dangerous_ops: true
  budget_exceeded: true
auto_approve_in_daemon: true

# Budgets & Limits
max_tool_calls: 50
max_run_time_seconds: 300
max_cost_usd: 1.0
max_failures_per_run: 3

# Memory
memory_enabled: false
write_policy: "explicit"
read_policy: "on_demand"

# Logging & Observability
log_level: "info"  # debug, info, warn, error
verbose_logging: false  # Enable detailed verbose logging for troubleshooting
log_format: "json"  # json or text
log_source: true  # Include source file/line information
trace_enabled: true
metrics_enabled: true
metrics_config:
  provider: "prometheus"  # or "otel"
  namespace: "agent"
  endpoint: "/metrics"
  prometheus:
    path: "/metrics"
    registry: "default"
    labels:
      service: "agent-runtime"
      environment: "development"
  # otel:
  #   endpoint: "http://localhost:4317"
  #   protocol: "grpc"
  #   export_timeout: 30s
  #   resources:
  #     service.name: "agent-runtime"
  #     service.version: "1.0.0"
log_payload_policy: "redacted"  # full, redacted, hashes_only

# Reliability
idempotency_keys: true
resume_on_restart: false
